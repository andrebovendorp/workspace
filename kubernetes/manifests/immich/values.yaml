immich:
  image:
    tag: v1.125.3
  immich:
    metrics:
      enabled: false
    persistence:
      library:
        existingClaim: immich-data

  env:
    REDIS_HOSTNAME: redis-headless.redis.svc.cluster.local
    DB_HOSTNAME: pgsql-postgresql-hl.pgsql.svc.cluster.local
    DB_USERNAME: immich
    DB_PASSWORD:
      valueFrom:
        secretKeyRef:
          name: pgsql-password
          key: immich-password
    DB_DATABASE_NAME: immich

  postgresql:
    enabled: false

  redis:
    enabled: false

  server:
    enabled: true
    ingress:
      main:
        enabled: true
        annotations:
          kubernetes.io/tls-acme: "true"
          cert-manager.io/cluster-issuer: letsencrypt-prod
          nginx.ingress.kubernetes.io/proxy-body-size: "0"
        ingressClassName: nginx
        hosts:
          - host: photos.nullservers.com
            paths:
              - path: /
                pathType: ImplementationSpecific
        tls:
          - secretName: home-assistant-tls
            hosts:
              - photos.nullservers.com

    machine-learning:
      enabled: true
      persistence:
        cache:
          type: pvc
          storageClass: ssd-storage
      containers:
        main: 
          resources:
            requests:
              cpu: 1
              memory: 500Mi
            limits:
              cpu: 2
              memory: 1Gi
