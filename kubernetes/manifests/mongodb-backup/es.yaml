apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: mongodb-backup-es
  namespace: mongodb-backup
spec:
  # The name of the Kubernetes Secret that will be created and kept in sync.
  target:
    name: mongodb-backup-creds

  # The name of the SecretStore that knows how to connect to your secret backend.
  # Replace with the actual name of your SecretStore.
  secretStoreRef:
    name: onepassword
    kind: ClusterSecretStore

  # A list of secrets to fetch from the external store and sync.
  data:
  # This entry fetches the MongoDB URI.
  - secretKey: MONGO_URI
    remoteRef:
      key: mongodb-backup-credentials # Replace with the path to your secret
      property: mongo-uri # Replace with the key name of the URI in your secret

  # This entry fetches the FTP password.
  - secretKey: FTP_PASSWORD
    remoteRef:
      key: ftp-server-password
      property: password
